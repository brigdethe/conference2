!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).instametricsTracker=e()}}((function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(e){(function(){(function(){"use strict";var r={function:!0,object:!0},i=r[typeof window]&&window||this,o=r[typeof n]&&n,a=r[typeof t]&&t&&!t.nodeType&&t,s=o&&a&&"object"==typeof e&&e;!s||s.global!==s&&s.window!==s&&s.self!==s||(i=s);var c=Math.pow(2,53)-1,l=/\bOpera/,u=Object.prototype,p=u.hasOwnProperty,d=u.toString;function m(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function f(e){return e=g(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:m(e)}function h(e,t){for(var n in e)p.call(e,n)&&t(e[n],n,e)}function b(e){return null==e?m(e):d.call(e).slice(8,-1)}function y(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function v(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=c)for(;++n<r;)t(e[n],n,e);else h(e,t)}(e,(function(r,i){n=t(n,r,i,e)})),n}function g(e){return String(e).replace(/^ +| +$/g,"")}var x=function e(t){var n=i,r=t&&"object"==typeof t&&"String"!=b(t);r&&(n=t,t=null);var o=n.navigator||{},a=o.userAgent||"";t||(t=a);var s,c,u,p,m,x=r?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(d.toString()),w="Object",E=r?w:"ScriptBridgingProxyObject",S=r?w:"Environment",k=r&&n.java?"JavaPackage":b(n.java),T=r?w:"RuntimeObject",I=/\bJava/.test(k)&&n.java,O=I&&b(n.environment)==S,A=I?"a":"α",L=I?"b":"β",C=n.document||{},P=n.operamini||n.opera,B=l.test(B=r&&P?P["[[Class]]"]:b(P))?B:P=null,M=t,j=[],N=null,_=t==a,U=_&&P&&"function"==typeof P.version&&P.version(),R=v([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(t)&&(n.label||n)})),F=function(e){return v(e,(function(e,n){return e||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(t)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),K=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),W=function(e){return v(e,(function(e,n,r){return e||(n[K]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(K)]||RegExp("\\b"+y(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),G=function(e){return v(e,(function(e,n){var r=n.pattern||y(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),f(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function q(e){return v(e,(function(e,n){var r=n.pattern||y(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=f(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function X(e){return v(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(R&&(R=[R]),/\bAndroid\b/.test(G)&&!K&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(K=g(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),W&&!K?K=q([W]):W&&K&&(K=K.replace(RegExp("^("+y(W)+")[-_.\\s]","i"),W+" ").replace(RegExp("^("+y(W)+")[-_.]?(\\w)","i"),W+" $2")),(s=/\bGoogle TV\b/.exec(K))&&(K=s[0]),/\bSimulator\b/i.test(t)&&(K=(K?K+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(t)&&j.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(t)?(W=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,K=s.product):/^iP/.test(K)?(F||(F="Safari"),G="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==F&&/^Linux\b/i.test(G)?G="Kubuntu":W&&"Google"!=W&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(K))||/\bAndroid\b/.test(G)&&/^Chrome/.test(F)&&/\bVersion\//i.test(t)?(F="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==F?(/\bMobi/i.test(t)||(G="Android",j.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&j.unshift("accelerated")):"UC Browser"==F&&/\bUCWEB\b/.test(t)?j.push("speed mode"):"PaleMoon"==F&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?j.push("identifying as Firefox "+s[1]):"Firefox"==F&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(G||(G="Firefox OS"),K||(K=s[1])):!F||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!K&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(F=null),(s=K||W||G)&&(K||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:s)+" Browser")):"Electron"==F&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&j.push("Chromium "+s),U||(U=X(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(F),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==R&&parseFloat(U)>3?"WebKit":/\bOpera\b/.test(F)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(R)&&"WebKit"||!R&&/\bMSIE\b/i.test(t)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==R&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(R=[s]),"IE"==F&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(F+=" Mobile",G="Windows Phone "+(/\+$/.test(s)?s:s+".x"),j.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(F="IE Mobile",G="Windows Phone 8.x",j.unshift("desktop mode"),U||(U=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=F&&"Trident"==R&&(s=/\brv:([\d.]+)/.exec(t))&&(F&&j.push("identifying as "+F+(U?" "+U:"")),F="IE",U=s[1]),_){if(p="global",m=null!=(u=n)?typeof u[p]:"number",/^(?:boolean|number|string|undefined)$/.test(m)||"object"==m&&!u[p])b(s=n.runtime)==E?(F="Adobe AIR",G=s.flash.system.Capabilities.os):b(s=n.phantom)==T?(F="PhantomJS",U=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof C.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?(U=[U,C.documentMode],(s=+s[1]+4)!=U[1]&&(j.push("IE "+U[1]+" mode"),R&&(R[1]=""),U[1]=s),U="IE"==F?String(U[1].toFixed(1)):U[0]):"number"==typeof C.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(j.push("masking as "+F+" "+U),F="IE",U="11.0",R=["Trident"],G="Windows");else if(I&&(M=(s=I.lang.System).getProperty("os.arch"),G=G||s.getProperty("os.name")+" "+s.getProperty("os.version")),O){try{U=n.require("ringo/engine").version.join("."),F="RingoJS"}catch(e){(s=n.system)&&s.global.system==n.system&&(F="Narwhal",G||(G=s[0].os||null))}F||(F="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(s=n.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(j.push("Node "+s.versions.node),F="Electron",U=s.versions.electron):"string"==typeof s.versions.nw&&(j.push("Chromium "+U,"Node "+s.versions.node),F="NW.js",U=s.versions.nw)),F||(F="Node.js",M=s.arch,G=s.platform,U=(U=/[\d.]+/.exec(s.version))?U[0]:null));G=G&&f(G)}if(U&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(_&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(N=/b/i.test(s)?"beta":"alpha",U=U.replace(RegExp(s+"\\+?$"),"")+("beta"==N?L:A)+(/\d+\+?/.exec(s)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(G))F="Firefox Mobile";else if("Maxthon"==F&&U)U=U.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(K))"Xbox 360"==K&&(G=null),"Xbox 360"==K&&/\bIEMobile\b/.test(t)&&j.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||K||/Browser|Mobi/.test(F))||"Windows CE"!=G&&!/Mobi/i.test(t))if("IE"==F&&_)try{null===n.external&&j.unshift("platform preview")}catch(e){j.unshift("embedded")}else(/\bBlackBerry\b/.test(K)||/\bBB10\b/.test(t))&&(s=(RegExp(K.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||U)?(G=((s=[s,/BB10/.test(t)])[1]?(K=null,W="BlackBerry"):"Device Software")+" "+s[0],U=null):this!=h&&"Wii"!=K&&(_&&P||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==F&&(G&&!/^Win/.test(G)&&U>5.5||/\bWindows XP\b/.test(G)&&U>8||8==U&&!/\bTrident\b/.test(t)))&&!l.test(s=e.call(h,t.replace(l,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),l.test(F)?(/\bIE\b/.test(s)&&"Mac OS"==G&&(G=null),s="identify"+s):(s="mask"+s,F=B?f(B.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(G=null),_||(U=null)),R=["Presto"],j.push(s));else F+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==F&&"+"==s[1].slice(-1)?(F="WebKit Nightly",N="alpha",U=s[1].slice(0,-1)):U!=s[1]&&U!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(U=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==R&&(R=["Blink"]),_&&(x||s[1])?(R&&(R[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=R?"27":"28")):(R&&(R[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),R&&(R[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==F&&(!U||parseInt(U)>45)?U=s:"Chrome"==F&&/\bHeadlessChrome/i.test(t)&&j.unshift("headless")),"Opera"==F&&(s=/\bzbov|zvav$/.exec(G))?(F+=" ",j.unshift("desktop mode"),"zvav"==s?(F+="Mini",U=null):F+="Mobile",G=G.replace(RegExp(" *"+s+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(R&&R[1])?(j.unshift("desktop mode"),F="Chrome Mobile",U=null,/\bOS X\b/.test(G)?(W="Apple",G="iOS 4.3+"):G=null):/\bSRWare Iron\b/.test(F)&&!U&&(U=X("Chrome")),U&&0==U.indexOf(s=/[\d.]+$/.exec(G))&&t.indexOf("/"+s+"-")>-1&&(G=g(G.replace(s,""))),G&&-1!=G.indexOf(F)&&!RegExp(F+" OS").test(G)&&(G=G.replace(RegExp(" *"+y(F)+" *"),"")),R&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(G)&&/\bSafari\b/.test(R[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(F)&&R[1])&&(s=R[R.length-1])&&j.push(s),j.length&&(j=["("+j.join("; ")+")"]),W&&K&&K.indexOf(W)<0&&j.push("on "+W),K&&j.push((/^on /.test(j[j.length-1])?"":"on ")+K),G&&(s=/ ([\d.+]+)$/.exec(G),c=s&&"/"==G.charAt(G.length-s[0].length-1),G={architecture:32,family:s&&!c?G.replace(s[0],""):G,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(M))&&!/\bi686\b/i.test(M)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+s),"")),F&&(/\bWOW64\b/i.test(t)||_&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&j.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==F&&parseFloat(U)>=39&&(G.architecture=64),t||(t=null);var H={};return H.description=t,H.layout=R&&R[0],H.manufacturer=W,H.name=F,H.prerelease=N,H.product=K,H.ua=t,H.version=F&&U,H.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=e,H.toString=function(){return this.description||""},H.version&&j.unshift(U),H.name&&j.unshift(F),G&&F&&(G!=String(G).split(" ")[0]||G!=F.split(" ")[0]&&!K)&&j.push(K?"("+G+")":"on "+G),j.length&&(H.description=j.join(" ")),H}();o&&a?h(x,(function(e,t){o[t]=e})):i.platform=x}).call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createAction=void 0;var r=e("./xhr.js"),i=e("./helpers.js");n.createAction=function(e,t,n,o,a){(0,r.send)(window.instametricsServerUrl+"/api/actions",{url:(0,i.getPageUrl)(),scriptId:window.instametricsScriptId,selector:e,link:t,text:n,label:o,type:a},localStorage.getItem("instametricsToken"))}},{"./helpers.js":5,"./xhr.js":12}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resetAutoTrack=n.autoTrack=void 0;var r,i,o,a,s,c,l,u,p=e("./events"),d=e("./helpers");function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=n.autoTrack=function(){r=document.querySelectorAll("button, .button, [role='button'], [type='button'], [type='submit'], [type='reset']"),i=document.querySelectorAll("a"),o=document.querySelectorAll("input"),a=document.querySelectorAll("textarea"),s=document.querySelectorAll("select"),c=document.querySelectorAll("form"),l=document.querySelectorAll('button[aria-label="Play"]'),u=document.querySelectorAll(".w-embed-youtubevideo"),[].concat(m(r),m(i),m(o),m(a),m(s)).forEach((function(e){e.addEventListener(d.EventListenerType.CLICK,(function(){return b(e)}))})),[].concat(m(o),m(a)).forEach((function(e){e.addEventListener(d.EventListenerType.BLUR,(function(){return y(e)}))})),s.forEach((function(e){e.addEventListener(d.EventListenerType.CHANGE,(function(){return v(e)}))})),c.forEach((function(e){e.addEventListener(d.EventListenerType.SUBMIT,(function(){return g(e)}))})),l.forEach((function(e){e.parentElement.addEventListener(d.EventListenerType.CLICK,(function(){return x(e.parentElement)}))})),u.forEach((function(e){e.addEventListener(d.EventListenerType.CLICK,(function(){return x(e)}))}))},b=(n.resetAutoTrack=function(){[].concat(m(r),m(i),m(o),m(a),m(s)).forEach((function(e){e.removeEventListener(d.EventListenerType.CLICK,(function(){return b(e)}))})),[].concat(m(o),m(a)).forEach((function(e){e.removeEventListener(d.EventListenerType.BLUR,(function(){return y(e)}))})),s.forEach((function(e){e.removeEventListener(d.EventListenerType.CHANGE,(function(){return v(e)}))})),c.forEach((function(e){e.removeEventListener(d.EventListenerType.SUBMIT,(function(){return g(e)}))})),l.forEach((function(e){e.parentElement.removeEventListener(d.EventListenerType.CLICK,(function(){return x(e)}))})),u.forEach((function(e){e.parentElement.removeEventListener(d.EventListenerType.CLICK,(function(){return x(e)}))})),setTimeout((function(){h()}),1e3)},function(e){var t,n,r=(0,d.getUniqueSelector)(e).trim(),i=null!==(t=e.href)&&void 0!==t?t:"",o=null!==(n=e.innerText)&&void 0!==n?n:"",a=(0,d.getClickActionType)(e.tagName);(0,p.recordEvent)(r,i,o,a)}),y=function(e){var t=(0,d.getUniqueSelector)(e).trim(),n=(0,d.getBlurActionType)(e.tagName);(0,p.recordEvent)(t,"","",(e.value,n))},v=function(e){var t=(0,d.getUniqueSelector)(e).trim();(0,p.recordEvent)(t,"","",d.ActionType.SELECT_CHANGE)},g=function(e){var t=(0,d.getUniqueSelector)(e).trim();(0,p.recordEvent)(t,"","",d.ActionType.FORM_SUBMIT)},x=function(e){var t=(0,d.getUniqueSelector)(e).trim();(0,p.recordEvent)(t,"","",d.ActionType.YOUTUBE_PLAY)}},{"./events":4,"./helpers":5}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.recordEvent=void 0;var r=e("./xhr.js"),i=e("./helpers.js"),o=e("./session.js"),a=[];n.recordEvent=function(e,t,n,r){a.push({selector:e,link:t,name:n,type:r,createdAt:new Date})};setInterval((function(){0!==a.length&&((0,r.send)(window.instametricsServerUrl+"/api/events",{url:(0,i.getPageUrl)(),scriptId:window.instametricsScriptId,events:a,visitor:(0,o.sessionAttributes)(!0)},void 0),a=[])}),5e3)},{"./helpers.js":5,"./session.js":7,"./xhr.js":12}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isLocalhost=n.isInBackground=n.isFixedPosition=n.isBrowser=n.isBot=n.getUniqueSelector=n.getPageUrl=n.getClickActionType=n.getBlurActionType=n.getActionTypeName=n.EventListenerType=n.ElementType=n.ActionType=void 0;n.isBrowser="undefined"!=typeof window,n.isLocalhost=function(e){return""===e||"localhost"===e||"127.0.0.1"===e||"::1"===e},n.isBot=function(e){return/bot|crawler|spider|crawling/i.test(e)},n.isInBackground=function(){return"hidden"===document.visibilityState},n.getUniqueSelector=function(e){for(var t="",n=e;;){if(t)if(1===document.querySelectorAll(t).length)return t;if(!n||!n.tagName)return t;var r=n.tagName.toLowerCase(),i=n.parentNode.querySelectorAll(r),o=Array.prototype.indexOf.call(i,n);if(1!==i.length){if(t="".concat(r,":nth-of-type(").concat(o+1,") ").concat(t),n=n.parentNode,1===document.querySelectorAll(t).length)return t}else t="".concat(r," ").concat(t),n=n.parentNode}},n.getPageUrl=function(){return window.location.href.split("?")[0]},n.getClickActionType=function(e){switch(e){case"A":return r.LINK_CLICK;case"BUTTON":return r.BUTTON_CLICK;case"INPUT":return r.INPUT_CLICK;case"TEXTAREA":return r.TEXTAREA_CLICK;case"SELECT":return r.SELECT_CLICK;default:return r.UNKNOWN_CLICK}},n.getBlurActionType=function(e){switch(e){case"INPUT":return r.INPUT_BLUR;case"TEXTAREA":return r.TEXTAREA_BLUR;default:return"unknown-blur"}},n.EventListenerType={CLICK:"click",BLUR:"blur",SUBMIT:"submit",CHANGE:"change"},n.ElementType={LINK:"a",BUTTON:"button",INPUT:"input",TEXTAREA:"textarea",SELECT:"select"};var r=n.ActionType={BUTTON_CLICK:"button-click",LINK_CLICK:"link-click",INPUT_CLICK:"input-click",TEXTAREA_CLICK:"textarea-click",SELECT_CLICK:"select-click",UNKNOWN_CLICK:"unknown-click",INPUT_BLUR:"input-blur",TEXTAREA_BLUR:"textarea-blur",SELECT_CHANGE:"select-change",FORM_SUBMIT:"form-submit",YOUTUBE_PLAY:"youtube-play"};n.getActionTypeName=function(e){switch(e){case r.BUTTON_CLICK:return"button click";case r.LINK_CLICK:return"link click";case r.INPUT_CLICK:return"input click";case r.TEXTAREA_CLICK:return"textarea click";case r.SELECT_CLICK:return"select click";case r.UNKNOWN_CLICK:return"click";case r.INPUT_BLUR:return"input focus out";case r.TEXTAREA_BLUR:return"textarea focus out";case r.SELECT_CHANGE:return"select change";case r.FORM_SUBMIT:return"form submit";case r.YOUTUBE_PLAY:return"youtube play";default:return""}},n.isFixedPosition=function(e){for(;e&&"body"!==e.nodeName.toLowerCase();){var t=window.getComputedStyle(e).getPropertyValue("position").toLowerCase();if("fixed"===t||"sticky"===t)return!0;e=e.parentNode}return!1}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.detect=void 0;var r,i,o=e("./session"),a=e("./helpers"),s=e("./auto-track"),c=e("./ui/ui"),l=n.detect=function(){var e=document.querySelector("[instametrics-script-id], [data-instametrics-script-id]");null!=e&&(window.instametricsServerUrl=e.getAttribute("instametrics-server-url")||e.getAttribute("data-instametrics-server-url")||"",window.instametricsScriptId=e.getAttribute("instametrics-script-id")||e.getAttribute("data-instametrics-script-id"),window.instametricsDebug="true"===e.getAttribute("debug")||!0===e.getAttribute("data-debug"),(0,s.autoTrack)(),(0,o.recordSession)(),(0,c.setupUI)())};window.onload=function(){!0===a.isBrowser&&l()},window.onpopstate=function(){!0===a.isBrowser&&(0,s.resetAutoTrack)()},r=window.history,i=r.pushState,r.pushState=function(e){return"function"==typeof r.onpushstate&&r.onpushstate({state:e}),(0,s.resetAutoTrack)(),i.apply(r,arguments)}},{"./auto-track":3,"./helpers":5,"./session":7,"./ui/ui":11}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sessionAttributes=n.recordSession=void 0;var r,i=(r=e("platform"))&&r.__esModule?r:{default:r},o=e("./helpers.js"),a=e("./xhr.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){var e=(location.search.split("source=")[1]||"").split("&")[0];return""===e?void 0:e},d=n.sessionAttributes=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={siteLocation:(0,o.getPageUrl)(),siteReferrer:document.referrer,source:p()},n={siteLanguage:(navigator.language||navigator.userLanguage).substr(0,2),screenWidth:screen.width,screenHeight:screen.height,screenColorDepth:screen.colorDepth,deviceName:i.default.product,deviceManufacturer:i.default.manufacturer,osName:i.default.os.family,osVersion:i.default.os.version,browserName:i.default.name,browserVersion:i.default.version,browserWidth:window.outerWidth,browserHeight:window.outerHeight};return l(l({},t),!0===e?n:{})};n.recordSession=function(){var e=l(l({},d(!0)),{},{scriptId:window.instametricsScriptId});(0,a.send)(window.instametricsServerUrl+"/api/sessions",e,void 0)}},{"./helpers.js":5,"./xhr.js":12,platform:1}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createOverlayToggle=void 0;var r=e("./popup.js"),i=e("../helpers.js");function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=null,c=null,l=(n.createOverlayToggle=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var t=document.createElement("div");return t.id="instametrics-overlay-toggle",t.innerHTML='\n  <label id="instametrics-switch">\n    <input id="instametrics-switch-checkbox" type="checkbox" '.concat(e?"checked":"",'>\n    <span id="instametrics-switch-slider"></span>\n  </label>\n  <div id="instametrics-overlay-toggle-logo">\n    <img src="https://instametrics-script.s3.us-west-1.amazonaws.com/instametrics-logo.png" alt="instametrics logo">\n  </div>\n  <div id="instametrics-overlay-toggle-close">\n    <img src="https://instametrics-script.s3.us-west-1.amazonaws.com/x.svg" alt="Close">\n  </div>\n  '),document.body.appendChild(t),document.getElementById("instametrics-overlay-toggle").addEventListener("click",l),document.getElementById("instametrics-switch-checkbox").addEventListener("change",l),e&&null===s&&((s=u()).style.display="block"),document.getElementById("instametrics-overlay-toggle-close").addEventListener("click",(function(e){e.stopPropagation(),null!==s&&(s.remove(),s=null),t.style.display="none",localStorage.setItem("showInstametricsPlugin","false")})),t},function(){var e=!1;null===s?((s=u()).style.display="block",e=!0):"block"!==s.style.display?(s.style.display="block",e=!0):(s.remove(),s=null);var t=document.getElementById("instametrics-switch-checkbox");t&&(t.checked=e)}),u=function(){var e=document.createElement("div");return e.id="instametrics-overlay",document.body.appendChild(e),p(e),e},p=function(e){var t=document.querySelectorAll("button, .button, [role='button'], [type='button'], [type='submit'], [type='reset']"),n=document.querySelectorAll("a"),r=document.querySelectorAll("input"),a=document.querySelectorAll("textarea"),s=document.querySelectorAll("select"),c=document.querySelectorAll("form"),l=document.querySelectorAll('button[aria-label="Play"]'),u=document.querySelectorAll(".w-embed-youtubevideo");c.forEach((function(t){d(t,e,[i.ActionType.FORM_SUBMIT])})),[].concat(o(t),o(n)).forEach((function(t){d(t,e,[(0,i.getClickActionType)(t.tagName)])})),[].concat(o(r),o(a)).forEach((function(t){d(t,e,[(0,i.getBlurActionType)(t.tagName),(0,i.getClickActionType)(t.tagName)])})),s.forEach((function(t){d(t,e,[i.ActionType.SELECT_CLICK,i.ActionType.SELECT_CHANGE])})),l.forEach((function(t){d(t.parentElement,e,[i.ActionType.YOUTUBE_PLAY])})),u.forEach((function(t){d(t,e,[i.ActionType.YOUTUBE_PLAY])}))},d=function(e,t,n){var o,a,s=(0,i.getUniqueSelector)(e).trim(),c=null!==(o=e.href)&&void 0!==o?o:"",l=null!==(a=e.innerText)&&void 0!==a?a:"",u=m(e,n,s);t.appendChild(u),u.addEventListener("mouseover",(function(){u.style.top=parseInt(u.style.top)-24*n.length+"px",u.style.height=parseInt(u.style.height)+24*n.length+"px"})),u.addEventListener("mouseout",(function(){u.style.top=parseInt(u.style.top)+24*n.length+"px",u.style.height=parseInt(u.style.height)-24*n.length+"px"})),u.querySelectorAll(".instametrics-overlay-element-button").forEach((function(i,o){i.addEventListener("click",(function(){(0,r.createPopup)(t,e,parseInt(u.style.height),s,c,l,n[o])}))}))},m=function(e,t,n){var r=e.getBoundingClientRect(),o=(0,i.isFixedPosition)(e),a=document.createElement("div");a.className="instametrics-overlay-element",a.style.top=window.scrollY+r.top-8+"px",a.style.left=window.scrollX+r.left-8+"px",a.style.width=r.right-r.left+16+"px",a.style.height=r.bottom-r.top+16+"px",a.style.position=o?"fixed":"absolute";var s=document.createElement("div");s.className="instametrics-overlay-element-background";var c=0,l=!1;return s.innerHTML=t.reduce((function(e,t){var r=y(n,t);b(n,t)&&(l=!0);var o=f(n,t),a=h(o);c+=o;var s=(0,i.getActionTypeName)(t);return e+'<div class="instametrics-overlay-element-button">'.concat(r," ").concat(a,"Track ").concat(s,"</div>")}),""),c>0&&(s.innerHTML+='<div class="instametrics-overlay-element-count '.concat(l&&"instametrics-overlay-element-count-setup",'">').concat(c,"</div>")),a.appendChild(s),a},f=function(e,t){var n,r;return null!==(n=null===(r=c.find((function(n){return n.selector===e&&n.type===t})))||void 0===r?void 0:r.count)&&void 0!==n?n:0},h=function(e){return e?"".concat(e," - "):""},b=function(e,t){return c.some((function(n){return n.selector===e&&n.type===t&&n.label}))},y=function(e,t){return b(e,t)?'<img class="instametrics-overlay-element-status" src="https://instametrics-script.s3.us-west-1.amazonaws.com/setup.png" alt="Setup">':'<img class="instametrics-overlay-element-status" src="https://instametrics-script.s3.us-west-1.amazonaws.com/nosetup.png" alt="No Setup">'}},{"../helpers.js":5,"./popup.js":9}],9:[function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.destroyPopup=n.createPopup=void 0;var i,o=e("../actions"),a=e("../helpers");function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:A(e,n,s)}),a}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",h="suspendedYield",b="executing",y="completed",v={};function g(){}function x(){}function w(){}var E={};p(E,c,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(M([])));k&&k!==n&&i.call(k,c)&&(E=k);var T=w.prototype=g.prototype=Object.create(E);function I(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(o,a,s,c){var l=m(e[o],e,a);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==r(p)&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(p).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=f;return function(o,a){if(i===b)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=L(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=b;var l=m(t,n,r);if("normal"===l.type){if(i=r.done?y:h,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function L(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=m(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return x.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:x,configurable:!0}),x.displayName=p(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,u,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},I(O.prototype),p(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new O(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},I(T),p(T,u,"Generator"),p(T,c,(function(){return this})),p(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}var u=n.destroyPopup=function(){i&&(i.remove(),i=null)},p=(n.createPopup=function(e,t,n,r,o,s,c){u();var l=t.getBoundingClientRect(),d=document.createElement("div");return d.id="instametrics-popup",d.style.top=window.scrollY+l.top+n-24+"px",d.style.left=window.scrollX+l.left-8+"px",d.innerHTML='\n    <div class="instametrics-popup-head-container">\n      <div>\n        <div class="instametrics-popup-title">Create new '.concat((0,a.getActionTypeName)(c),' action</div>\n        <div class="instametrics-popup-description">What did your user do?</div>\n      </div>\n    </div>\n\n    <div class="instametrics-popup-section">\n      <input type="text" id="instametrics-popup-input-label" class="instametrics-popup-input" />\n      <div class="instametrics-popup-subnote">i.e. “Downloaded the Free PDF e-book”</div>\n    </div>\n\n    <div class="instametrics-popup-section">\n      <div class="instametrics-popup-header-container">\n        <input checked type="checkbox" id="instametrics-popup-checkbox-selector" class="instametrics-popup-checkbox" />\n        <div class="instametrics-popup-header">Selector</div>\n      </div>\n      <div class="instametrics-popup-description">CSS selector that uniquely identifies your element</div>\n      <input type="text" id="instametrics-popup-input-selector" class="instametrics-popup-input" value="').concat(r,'" />\n      <input type="hidden" id="instametrics-popup-type" class="instametrics-popup-input" value="').concat(c,'" />\n    </div>\n\n    <div class="instametrics-popup-section">\n      <div class="instametrics-popup-header-container">\n        <input type="checkbox" id="instametrics-popup-checkbox-link" class="instametrics-popup-checkbox" />\n        <div class="instametrics-popup-header">Link target</div>\n      </div>\n      <div class="instametrics-popup-description">If your element is a link, the location that the link opens (href tag)</div>\n      <input disabled type="text" id="instametrics-popup-input-link" class="instametrics-popup-input" value="').concat(o,'" />\n    </div>\n\n    <div class="instametrics-popup-section">\n      <div class="instametrics-popup-header-container">\n        <input type="checkbox" id="instametrics-popup-checkbox-text" class="instametrics-popup-checkbox" />\n        <div class="instametrics-popup-header">Text</div>\n      </div>\n      <div class="instametrics-popup-description">Text content inside your element</div>\n      <input disabled type="text" id="instametrics-popup-input-text" class="instametrics-popup-input" value="').concat(s,'" />\n    </div>\n\n    <div class="instametrics-popup-head-container">\n      <button disabled id="instametrics-popup-create-btn" class="instametrics-popup-create-btn">Create action</button>\n      <div id="instametrics-popup-cancel-btn" class="instametrics-popup-cancel-btn">Cancel</div>\n    </div>\n    '),e.appendChild(d),i=d,p(),d},function(){try{document.getElementById("instametrics-popup-cancel-btn").addEventListener("click",function(){var e=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i&&i.remove(),i=null;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.getElementById("instametrics-popup-create-btn").addEventListener("click",function(){var e=l(s().mark((function e(t){var n,r,a,c,l,u,p,d,m,f,h,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("instametrics-popup-input-label").value,r=document.getElementById("instametrics-popup-checkbox-selector"),a=document.getElementById("instametrics-popup-input-selector"),c=r.checked?a.value:void 0,l=document.getElementById("instametrics-popup-checkbox-link"),u=document.getElementById("instametrics-popup-input-link"),p=l.checked?u.value:void 0,d=document.getElementById("instametrics-popup-checkbox-text"),m=document.getElementById("instametrics-popup-input-text"),f=d.checked?m.value:void 0,h=document.getElementById("instametrics-popup-type"),b=h.value,(0,o.createAction)(c,p,f,n,b),i&&i.remove(),i=null;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.getElementById("instametrics-popup-input-label").addEventListener("input",(function(e){d()})),document.getElementById("instametrics-popup-checkbox-selector").addEventListener("change",(function(e){d(),document.getElementById("instametrics-popup-input-selector").disabled=!e.target.checked})),document.getElementById("instametrics-popup-input-selector").addEventListener("input",(function(e){d()})),document.getElementById("instametrics-popup-checkbox-link").addEventListener("change",(function(e){d(),document.getElementById("instametrics-popup-input-link").disabled=!e.target.checked})),document.getElementById("instametrics-popup-input-link").addEventListener("input",(function(e){d()})),document.getElementById("instametrics-popup-checkbox-text").addEventListener("change",(function(e){d(),document.getElementById("instametrics-popup-input-text").disabled=!e.target.checked})),document.getElementById("instametrics-popup-input-text").addEventListener("input",(function(e){d()}))}catch(e){console.error(e)}}),d=function(){var e=document.getElementById("instametrics-popup-input-label"),t=document.getElementById("instametrics-popup-checkbox-selector"),n=document.getElementById("instametrics-popup-input-selector"),r=t.checked&&n.value,i=document.getElementById("instametrics-popup-checkbox-link"),o=document.getElementById("instametrics-popup-input-link"),a=i.checked&&o.value,s=document.getElementById("instametrics-popup-checkbox-text"),c=document.getElementById("instametrics-popup-input-text"),l=s.checked&&c.value,u=e.value&&(r||a||l);return document.getElementById("instametrics-popup-create-btn").disabled=!u,u}},{"../actions":2,"../helpers":5}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.styles=void 0;n.styles='\n@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Source+Code+Pro:wght@600&display=swap");\n\n/* Overlay styles */\n#instametrics-overlay {\n  display: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9998;\n  pointer-events: none;\n}\n\n/* Overlay Element styles */\n.instametrics-overlay-element {\n  position: absolute;\n  pointer-events: auto;\n  z-index: 9998;\n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background {\n  width: 100%;\n  height: 100%;\n  background-color: rgba(208, 213, 221, 0.2);\n  border: 1px solid var(--gray-300, #D0D5DD);\n  border-radius: 6px;\n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background:hover {\n  background-color: rgba(208, 213, 221, 0.4);\n  border: 1px solid var(--gray-300, #D0D5DD);\n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background:hover .instametrics-overlay-element-button {\n  display: block;\n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background .instametrics-overlay-element-count {\n  display: block;\n  position: absolute;\n  padding: 4px;\n  right: -8px;\n  top: -9px;\n\n  border-radius: 6px;\n  border: 1px solid var(--yellow-200, rgb(253 224 71));\n  background: var(--yellow-300, rgb(254 240 138));\n\n  /* Shadow/xs */\n  box-shadow: 0px 1px 2px 0px rgba(16, 24, 40, 0.05);\n\n  color: var(--gray-700, #344054);\n  text-align: center;\n  font-family: Inter;\n  font-size: 10px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 10px; \n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background .instametrics-overlay-element-count-setup {\n  border: 1px solid var(--green-200, rgb(134 239 172));\n  background: var(--green-300, rgb(187 247 208));\n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background:hover .instametrics-overlay-element-count {\n  display: none;\n}\n\n.instametrics-overlay-element-status {\n  width: 8px;\n  margin-right: 4px;\n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background .instametrics-overlay-element-button {\n  display: none;\n  text-wrap: nowrap;\n  white-space: nowrap;\n  border: 1px solid var(--gray-300, #D0D5DD);\n  border-radius: 6px;\n  margin: 4px;\n  padding: 4px 8px;\n  background-color: white;\n  width: min-content;\n\n  color: var(--gray-700, #344054);\n  text-align: center;\n  font-family: Inter;\n  font-size: 10px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 10px;\n}\n\n.instametrics-overlay-element .instametrics-overlay-element-background .instametrics-overlay-element-button:hover {\n  cursor: pointer;\n}\n\n\n/* Overlay Toggle styles */\n#instametrics-overlay-toggle {\n  box-sizing: initial;\n  position: fixed;\n  display: flex;\n  top: calc(50% - 10px);\n  right: 0;\n  height: 20px;\n  z-index: 10000;\n  pointer-events: auto;\n\n  background-color: white;\n  border: 1px solid #E5E7EB;\n  border-top-left-radius: 6px;\n  border-bottom-left-radius: 6px;\n  padding: 10px;\n  color: black;\n\n  box-shadow: 0px 4px 4px 0px rgba(174, 174, 174, 0.25);\n}\n\n/* The switch - the box around the slider */\n#instametrics-overlay-toggle #instametrics-switch {\n  position: relative;\n  display: inline-block;\n  width: 33px;\n  height: 18px;\n  margin-top: 1px;\n}\n\n/* Hide default HTML checkbox */\n#instametrics-overlay-toggle #instametrics-switch #instametrics-switch-checkbox {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n/* The slider */\n#instametrics-overlay-toggle #instametrics-switch-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #E2E8F0;\n  -webkit-transition: .4s;\n  transition: .4s;\n  border-radius: 34px;\n}\n\n#instametrics-overlay-toggle #instametrics-switch-slider:before {\n  position: absolute;\n  content: "";\n  height: 14px;\n  width: 14px;\n  left: 2px;\n  bottom: 2px;\n  background-color: white;\n  -webkit-transition: .4s;\n  transition: .4s;\n  border-radius: 50%;\n}\n\n#instametrics-overlay-toggle #instametrics-switch-checkbox:checked + #instametrics-switch-slider {\n  background-color: #0F172A;\n}\n\n#instametrics-overlay-toggle #instametrics-switch-checkbox:focus + #instametrics-switch-slider {\n  box-shadow: 0 0 1px #0F172A;\n}\n\n#instametrics-overlay-toggle #instametrics-switch-checkbox:checked + #instametrics-switch-slider:before {\n  -webkit-transform: translateX(15px);\n  -ms-transform: translateX(15px);\n  transform: translateX(15px);\n}\n\n#instametrics-overlay-toggle-logo {\n  z-index: 10000;\n}\n\n#instametrics-overlay-toggle-logo img {\n  z-index: 10000;\n  width: 130px;\n  margin-left: 10px;\n  vertical-align: initial;\n}\n\n#instametrics-overlay-toggle:hover {\n  cursor: pointer;\n}\n\n#instametrics-overlay-toggle-close {\n  display: flex;\n  margin-top: 2px;\n  margin-left: 8px;\n}\n\n#instametrics-overlay-toggle-close img {\n  width: 12px;\n}\n\n/* Popup styles */\n#instametrics-popup {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n  width: 325px;\n  padding: 17px;\n  border-radius: 6px;\n  border: 1px solid var(--slate-200, #E2E8F0);\n  background: #FFF;\n  box-shadow: 0px 4px 6px 0px rgba(0, 0, 0, 0.09);\n  pointer-events: auto;\n}\n\n#instametrics-popup .instametrics-popup-section {\n  margin-bottom: 16px;\n}\n\n#instametrics-popup-section {\n  margin-bottom: 16px;\n}\n\n#instametrics-popup .instametrics-popup-title  {\n  color: #000;\n  font-family: Inter;\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 16px; /* 100% */\n}\n\n#instametrics-popup .instametrics-popup-head-container  {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n\n\n#instametrics-popup .instametrics-popup-header-container  {\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 8px;\n}\n\n\n#instametrics-popup .instametrics-popup-header  {\n  color: #000;\n  /* small */\n  font-family: Inter;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 14px; /* 100% */\n}\n\n#instametrics-popup .instametrics-popup-description  {\n  margin-bottom: 8px;\n  color: var(--slate-400, #94A3B8);\n  font-family: Inter;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px; /* 142.857% */\n}\n\n#instametrics-popup .instametrics-popup-subnote  {\n  color: var(--slate-400, #94A3B8);\n  font-family: Inter;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 20px; /* 166.667% */\n}\n\n#instametrics-popup .instametrics-popup-checkbox  {\n  margin-right: 8px;\n}\n\n#instametrics-popup .instametrics-popup-input  {\n  display: flex;\n  width: 286px;\n  height: 36px;\n  padding: 8px 12px;\n  align-items: flex-start;\n  gap: 10px;\n  border-radius: 6px;\n  border: 1px solid var(--slate-300, #CBD5E1);\n  background: #FFF;\n  color: var(--slate-800, #1E293B);\n\n  /* subtle */\n  font-family: Inter;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px; /* 142.857% */\n}\n\n#instametrics-popup .instametrics-popup-input:disabled  {\n  background: #F1F5F9;\n}\n\n#instametrics-popup .instametrics-popup-cancel-btn  {\n  display: flex;\n  padding: 8px 16px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  border-radius: 6px;\n  border: 1px solid #E2E8F0;\n  background: var(--slate-100, #F1F5F9);\n\n  color: #0F172A;\n  font-family: Inter;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 24px; /* 171.429% */\n}\n\n#instametrics-popup .instametrics-popup-cancel-btn:hover {\n  cursor: pointer;\n  background: var(--slate-200, #E2E8F0);\n}\n\n#instametrics-popup .instametrics-popup-create-btn  {\n  width: max-content;\n\n  display: flex;\n  padding: 8px 16px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  border-radius: 6px;\n  background: var(--slate-900, #0F172A);\n\n  color: #FFF;\n  font-family: Inter;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 24px; /* 171.429% */\n}\n\n#instametrics-popup .instametrics-popup-create-btn:hover {\n  cursor: pointer;\n  background: var(--slate-800, #1E293B);\n}\n\n#instametrics-popup .instametrics-popup-create-btn:disabled {\n  cursor: pointer;\n  background: var(--slate-700, #7a808a);\n}\n\n#instametrics-popup .instametrics-popup-create-btn:disabled:hover {\n  cursor:auto;\n}\n'},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setupUI=void 0;var r=e("./styles.js"),i=e("./overlay.js"),o=e("../xhr.js");n.setupUI=function(){var e=window.location.search,t=new URLSearchParams(e),n=t.get("showInstametricsPlugin"),a=localStorage.getItem("showInstametricsPlugin");if("true"===n||"true"===a){localStorage.setItem("showInstametricsPlugin","true");var s=t.get("instametricsToken");if(s)localStorage.setItem("instametricsToken",s);else if(!(s=localStorage.getItem("instametricsToken")))return;(0,o.get)(window.instametricsServerUrl+"/api/script-data/"+window.instametricsScriptId,s,(function(e){var t;(0,i.createOverlayToggle)("true"===n,(null==e?void 0:e.groupedEvents)||[]),(t=document.createElement("style")).styleSheet?t.styleSheet.cssText=r.styles:t.appendChild(document.createTextNode(r.styles)),document.getElementsByTagName("head")[0].appendChild(t)}))}}},{"../xhr.js":12,"./overlay.js":8,"./styles.js":10}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.send=n.get=void 0;n.send=function(e,t,n,i){if(window.visitorIp)r(e,t,n,i);else{var o=new XMLHttpRequest;o.open("GET","https://api.ipify.org"),o.onload=function(){if(200===o.status){var a=o.responseText;window.visitorIp=a}r(e,t,n,i)},o.send()}};var r=function(e,t,n,r){window.instametricsDebug&&console.log("POST + "+e,t);var i=new XMLHttpRequest;i.open("POST",e),i.onload=function(){if(200!==i.status)throw new Error("Server returned with an unhandled status");var e=null;try{e=JSON.parse(i.responseText)}catch(e){throw new Error("Failed to parse response from server")}if(e&&null!=e.errors)throw new Error(e.errors[0].message);if("function"==typeof r)return r(e)},i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("X-Real-IP",window.visitorIp),n&&i.setRequestHeader("Authorization",n),i.send(JSON.stringify(t))};n.get=function(e,t,n){window.instametricsDebug&&console.log("GET + "+e);var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){if(200!==r.status)throw new Error("Server returned with an unhandled status");var e=null;try{e=JSON.parse(r.responseText)}catch(e){throw new Error("Failed to parse response from server")}if(e&&null!=e.errors)throw new Error(e.errors[0].message);if("function"==typeof n)return n(e)},r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.setRequestHeader("X-Real-IP",window.visitorIp),t&&r.setRequestHeader("Authorization",t),r.send()}},{}]},{},[6])(6)}));